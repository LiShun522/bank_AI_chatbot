import re

# 示例文本，您可以用实际的长文本替换这里的text变量
text = """
01.什麼是樂活養老貸款？
臺灣土地銀行為配合政府推展以房養老政策暨肩負社會公益責任，提供高齡者運用其自有不動產，取得穩定安養生活所需資金，俾享有優質老年安養生活，特採逆向抵押方式，推出「樂活養老」方案。所謂「逆向抵押」（reverse mortgage），係指貸款現金流量型態與一般貸款相反，即借款人在貸款期間每月可領取一筆生活所需資金，貸款到期後再一次清償，而一般貸款則係先一次取得貸款資金，再按月分期還款直至付清本息。

02.對象或申請資格為何？
凡年滿63歲、信用正常之本國自然人均可申請。

03. 擔保品有沒有特別的規定？
有的。須為借款人本人單獨所有，且擔保建物之登記簿謄本，其用途登記應含有「住宅」、「商業用」或「住」字樣。

04.貸款用途為何？
本貸款係提供安養生活所需資金，當然您可以自由運用。

05.貸款額度多少？
這需要看您所提供之擔保品座落：(1) 擔保品座落於臺北市、新北市捷運站（已完工並啟用通車）1,000公尺範圍內者，最高按認定價7成及查估值9成孰低範圍內核貸。(2) 其餘地區，最高按認定價6成及查估值9成孰低範圍內核貸。上述「認定價」或「查估值」均由本行認定之。

06.貸款利率多少？是固定或機動？
依貸放當時本行有關放款利率規定辦理，依本行公告指標利率固定加碼機動計息。例如105年8月10日起本行公告指標利率1.09%，固定加碼1.57%，年利率即為2.66%（1.09%+1.57%），未來年利率隨本行公告指標利率變動而變動，有關本行公告指標利率定義及歷史變動請至官方網站https://www.landbank.com.tw/「金融資訊」/「利率」項下查詢。

07.可以貸多久？（或者說可以領多久？）
貸款對象年滿65歲（含）者，貸款期間加計借款人年齡合計數不得低於95歲，最長以30年為限；年滿63歲（含）至未滿65歲者，貸款期間一律為30年。例如：假設您滿70歲，那貸款期限可申請25~30年；您滿63歲，那貸款期限則為30年。

08.每個月可以領多少錢？
這需要看最終核貸金額、貸款年限及利率而定，詳細說明如下：(1) 如核貸金額未逾認定價5成，原則上採平均法按月定額撥付。例如：核貸1,440萬元，貸款30年，年利率2.66%（假設貸款期間均不變動），則原則上每月可領4萬元[1,440÷(30×12)]。(2) 假如核貸金額超過認定價5成，則由於利息須按月計收，自第2個月起每月可領金額將逐漸減少。承前例，第1個月可領4萬元，第2個月可領39,911元(40,000-40,000×2.66%÷12)，第3個月可領39,823元(40,000-80,000×2.66%÷12)。依此類推。(3) 又利息委繳上限為每月所撥金額三分之一（計算至千元，以下捨去），故每月最少可領第1個月所撥金額三分之二，原應收利息差額掛帳，到期連本金一次清償。承前例，雖然自第2個月起將逐月減少，惟第148個月起至第360個月，每月固定領取27,000元整。

09.掛帳利息還會再算利息嗎？
不會，僅依本金餘額計算利息。

10.每月領取之金額要申報所得稅嗎？
不用。

11.如果房子增值或貶值了，每月領取的金額會增加或減少嗎？
不會。

12.申辦時是否要將房屋所有權轉到銀行名下？
不需要，惟須設定第一順位最高限額抵押權予本行。

13.如果因生病長期住院治療，貸款契約會因而中止嗎？
不會。除非發生如Q27之狀況，且本行無法與您取得聯繫時，得暫停撥款。

14.到期可以續貸嗎？
貸款屆期，借款人得經本行同意延長貸款期限，續予撥貸。每次延長貸款期限最長3年，且本行將辦理擔保品重估。並按重估後認定價及查估值依下列成數規定辦理續撥：(1) 擔保品座落於臺北市、新北市捷運站（已完工並啟用通車）1,000公尺範圍內者，「續撥金額加計未還本息（含掛帳利息）」不得逾認定價8成及查估值9成孰低範圍。(2) 其餘地區，「續撥金額加計未還本息（含掛帳利息）」不得逾認定價7成及查估值9成孰低範圍。

15.可以中途解約還款嗎？可以。

16.需要支付違約金嗎？不用，毋須支付違約金。

17.開辦需要支付手續費嗎？
需要，本行將收取開辦費5,000元及徵信調查費每人200元，並代票交所收取票據信用資料查詢費用100元，合計5,300元。(以上不包含律師諮詢費、代書費用、設定費用以及火險地震險等相關保險費用)。

18.擔保品該如何設定？設定費用多少？
原則上依擔保品「認定價」設定第一順位最高限額抵押權予本行，惟核貸金額未逾認定價5成者，本行得視情形以「核貸金額加四成」設定，並投保足額火險及地震險。設定費用係根據設定金額千分之一繳交予地政事務所，例如設定金額1,000萬元，則設定費用為1萬元。

19.如果房子在貴行尚有貸款，可以再申辦本項貸款嗎？
可以，但須由本行依據Q5成數規定扣除原貸款餘額辦理。

20.如果房子在他行尚有設定抵押貸款，可以再申辦本項貸款嗎？
因擔保品均須設定「第一順位」最高限額抵押權予本行，如您的房子尚有設定抵押貸款予他行，應先清償他行貸款並塗銷抵押權設定，再洽本行申辦本項貸款。

21.如果決定出售房子怎麼辦？
須還清貸款。

22.貸款期間生命結束時怎麼辦？貸款誰還？
借款人生命結束時，借款契約即終止，並停止撥款。還款方式依序有下列三種：(1) 由借款人之繼承人清償借款。(2) 由本行向法院聲請拍賣擔保品，就賣得價金受償。如不足清償應就借款人其他財產進行追償。(3) 執行「流抵契約」，亦即將擔保品之所有權移轉予本行。如擔保品價值足以清償本行債權，應將超逾之價值返還抵押人；如不足清償，應就借款人其他財產進行追償。

23.貸款需要保證人嗎？
本行得不徵提保證人，但借款人為強化自身信用條件，得主動提供一般保證人。另外須另覓一位通知義務人。

24.本項貸款可以向哪些分行申辦？
本行各地分行均可受理申貸,建議您可上本行官網(https://www.landbank.com.tw)/「服務據點」/「國內營業單位」項下查詢。

25.需要準備甚麼文件？
申貸時您至少需要準備下列文件，建議您在出門前，可先行電洽申辦分行詢問確認：身分證正本、第二身分證明文件正本，例如駕照、健保卡等·印章·擔保物之登記簿謄本·如有本行存款帳戶，請攜帶存摺。

26.提出申請後，多久可以知道審查結果？
如資料備齊，約需14個工作日。

27.聽說辦理貸款需要有一張「專業諮詢認證函」，那是什麼？
為期借款人充分瞭解本貸款相關內容及權利義務，於撥款前，應透過律師辦理諮詢，並取得完成諮詢之證明文件，此即「專業諮詢認證函」，相關費用須由借款人負擔喔!

28.還有哪些要注意的呢？
貸款期間本行將定期執行下列事項，以確保您確實領取月付金且正常運用：(1) 檢視您月付金領取情形，如發現連續達三個月無領取紀錄時，將聯繫您瞭解原因。(2) 至少每半年將訪視或聯繫您乙次，如無法取得聯繫，本行得暫停撥款。(3) 至少每年將已撥貸本金暨累積掛帳利息之對帳單，交給您簽章確認。如您有受輔助或受監護宣告情事，您的輔助人或監護人應簽章。當本行行員與您聯繫時，請別以為是詐騙集團喔!

29.關於本貸款如果還有其他問題，要向哪裡詢問呢？請洽就近分行授信部門詢問，各分行地址及聯絡電話可上本行官網(https://www.landbank.com.tw)/「服務據點」/「國內營業單位」項下查詢。

"""

# 按問題編號拆分文本
parts = re.split(r'(?=\n\d{2}\.)', text.strip())

from langchain_text_splitters import RecursiveCharacterTextSplitter
text_splitter = RecursiveCharacterTextSplitter(
    separators=[r'\n\d{2}\.\s'],  # 每個問題的開頭為兩位數字加一個句點和空格
    keep_separator=True,          # 保留分隔符
    is_separator_regex=True,      # 使用正則表達式
    chunk_size=1000,              # 根據文本長度調整
    chunk_overlap=0,              # 不需要重叠，因為每個問題都被分開了
    length_function=len
)

texts = text_splitter.create_documents(parts)

#我要將texts每行印出來
for i in range(len(texts)):
    print(texts[i])

# 打印每個文件的文字內容
for doc in texts:
    print(doc.page_content)  # 使用 page_content 屬性

# 將文字內容寫入檔案
with open('final_data.txt', 'w') as f:
    for doc in texts:
        f.write(doc.page_content + '\n')  # 寫入每個文件的文字內容並添加換行符



